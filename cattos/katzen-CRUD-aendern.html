<!DOCTYPE html>
<!-- ***************************************************************
*    Diese Datei geh√∂rt zum  WebEng-Kurs an der HNU
*    Copyright (c) by Bernice Welens & Maya Perschke
******************************************************************** -->
<html>

<head>
  <title>Unsere Katzen</title>
  <link rel="stylesheet" href="style/stylesheet.css" type="text/css" />
  <!-- Bestimme den vom Browser zu benutzenden Zeichensatz -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="../client-js/jquery-3.6.4.min.js"></script>
  <script type="text/javascript" src="../client-js/jquery-validate-1.19.3.min.js"></script>
  <script type="text/javascript" src="../client-js/jquery-extensions.js"></script>
  <script type="text/javascript" src="../client-js/jquery-ui-1.13.2.custom/jquery-ui.js"></script>

  <!--CSS-->
  <link rel="stylesheet" href="../client-js/jquery-ui-1.13.2.custom/jquery-ui.css" />
</head>

<!-- Header-->
<header class="header">
  <a href="../index.html">
    <img class="" id="logo" src="bilder/Logo2.svg" alt="Logo" width="80" height="80" />
  </a>
  <nav class="navigation">
    <ul>
      <li><a id="home" href="../index.html">Home</a></li>
      <li><a id="speisekarte" href="../speisekarte/css_speiseplanFunktionierendMitAllem.html">Speisekarte</a></li>
      <li><a id="uteam" href="../team/team.html">Team</a></li>
      <li><a id="katzen" href="cattos/katzen-CRUD-aendern.html" class="active">Katzen</a></li>
    </ul>
  </nav>
  <form id="search">
    <input id="searchbar" class="rund" type="text" placeholder="Search...">
  </form>
  <button id="logKnopf" onclick="alert('loginMaske')">Login</button>
</header>


<body>
  <div class="leererBlock"></div>
  <!--Loginmaske-->
  <div id="loginMaske" class="maske">
    <form id="loginForm">
      <div class="login-content">
        <h2>Logge dich hier ein!</h2>
      
        <table id="tabelle">
          <tr>
            <td>
              <label>Benutzername</label>
            </td>
            <td>
              <input id="benutzername" name="benutzername" class="rund" type="text" placeholder="Gib Dein Benutzername ein" />
            </td>
          </tr>
          <tr>
            <td>
              <label>Passwort</label>
            </td>
            <td>
              <input id="password" name="password" class="rund" type="password" placeholder="Gib Dein Passwort ein" />
            </td>
          </tr>
          <tr>
            <td></td>
            <td>
              <button type="button" class="button" id="loginButton" onclick="einloggen()">Login</button>
            </td>
          </tr>
        </table>
      </div>
      <div class="loginImage">
        <img src="bilder/pusheenlogIn.png" alt="pusheen" id="pusheenLogIn" />
      </div>
    </form>
  </div>

  <!--Head-->
  <div id="container1">
    <h1 class="item-header" id="haupt√ºberschrift">Unsere Katzen</h1>
  </div>

  <div class="item-main">
    <p class="text1">"Tauchen Sie ein in die faszinierende Atmosph√§re unseres Katzencaf√©s und lassen Sie sich von
      unseren charmanten Fellnasen verzaubern."
    </p>
    <div class="galerie">
      <img src="bilder/gallerypic1.jpeg" alt="" class="galerie-item" />
      <img src="bilder/gallerypic2.jpeg" alt="" class="galerie-item" />
      <img src="bilder/gallerypic3.jpeg" alt="" class="galerie-item" />
      <img src="bilder/gallerypic4.jpeg" alt="" class="galerie-item" />
      <img src="bilder/gallerypic5.jpeg" alt="" class="galerie-item" />
    </div>
  </div>
  <div id="empty"></div>
  <!--Eingabemaske-->
  <div id="eingabeMaske" class="maske">
    <form id="eingabeForm" name="eingabeForm" action="javascript:">
      <div id="table" class="table">
        <div class="nameMain">
          <div id="name1">
            <label for="name">Name:</label>
          </div>
          <div id="name2">
            <input type="text" id="nameEingabe" name="nameEingabe" placeholder="Name" />
          </div>
        </div>
        <div class="genderMain">
          <div id="gender1">
            <label for="geschlecht">Geschlecht:</label>
          </div>
          <div id="gender2">
            <fieldset>
            <div id="eingabeGeschlecht" class="value">
              <input for="M√§nnlich" type="radio" id="m√§nnlich" name="geschlecht" value="M√§nnlich" />
              <label for="m">M√§nnlich</label>
              <input for="Weiblich" type="radio" id="weiblich" name="geschlecht" value="Weiblich" />
              <label for="w">Weiblich</label>
            </div>
            </fieldset>
          </div>
        </div>
        <div class="ageMain">
          <div id="age1">
            <label for="alter">Alter:</label>
          </div>
          <div id="age2">
            <input type="number" id="alter" name="alter" min="0" placeholder="0" max="30" />
          </div>
        </div>
        <div class="breedMain">
          <div id="breed1">
            <label>Rasse:</label>
          </div>
          <div id="breed2">
            <input type="text" id="rasseEingabe" name="rasseEingabe" placeholder="Rasse" />
          </div>
        </div>
          <div class="pictureMain">
          <div id="picture1">
            <label>Bild:</label>
          </div>
          <div id="picture2">
            <input type="text" id="cover" name="bild" />
          </div>
        </div> 
      <br/>
      <div class="fieldsetMain">
      <div id="fieldset">
      <fieldset>
        <legend>Pers√∂nlichkeit</legend>
        <input type="checkbox" id="pers√∂nlichkeit1" name="pers√∂nlichkeit" value="kuschelig" />
        <label for="kuschelig">kuschelig</label>
        <br>
        <input type="checkbox" id="pers√∂nlichkeit2" name="pers√∂nlichkeit" value="verspielt" />
        <label for="verspielt">verspielt</label>
        <br>
        <input type="checkbox" id="pers√∂nlichkeit3" name="pers√∂nlichkeit" value="√§ngstlich" />
        <label for="√§ngstlich">√§ngstlich</label>
        <br>
        <input type="checkbox" id="pers√∂nlichkeit4" name="pers√∂nlichkeit" value="ruhig" />
        <label for="ruhig">ruhig</label>
        <br>
        <input type="checkbox" id="pers√∂nlichkeit5" name="pers√∂nlichkeit" value="aggressiv" />
        <label for="aggressiv">aggressiv</label>
        <br>
        <input type="checkbox" id="pers√∂nlichkeit6" name="pers√∂nlichkeit" value="hyperaktiv" />
        <label for="hyperaktiv">hyperaktiv</label>
      </fieldset>
      </div>
      </div>
      <div class="progressMain">
        <div id="progressbar"></div>
        <div id="bestaetigen">
          <button id="speichern"class="button" type="submit">Best√§tigen</button>
        </div>
      </div>
      </div>
    </form>
  </div>

  <!--Datenmaske-->
  <div id="datenMaske" class="maske">
    <div class="box1">
    <h2> Diese Katzen sind hier Zuhause ü§ç</h2>
    </div>
    <div class="box2">
    <button class="admin button" onclick="wechselnMaske('eingabeMaske','anlegen')">
      Anlegen
    </button>
    </div>
  
    <div id="datenMaskeZeilen" class="">
        <!-- Hier werden die Daten erscheinen -->
    </div>
  </div>
    
    
  <div id="dialog" title="Willst du die Katze wirklich l√∂schen?">
    <p><span class="ui-icon"></span></p>
  </div>

  <div class="leererBlock"></div>

  <!--Adoption-->
  <div id="adoptionText">
    <h2 id="adoption√úberschrift">Adoptiere eine Katze!</h2>
    <div id="adoptionText">
      <p id="adoptionsIntro">"Endecke Liebe in jeder Katze! Unsere bezaubernden Samtpfoten warten darauf,
        dein Herz zu erobern. In unserem Katzencaf√© Cats'n Coffee haben Sie nicht nur die M√∂glichkeit, die Gesellschaft
        unserer charmanten Katzen zu genie√üen, sondern auch die besondere Chance, eine dauerhafte Verbindung einzugehen.
        Hier k√∂nnen Sie nicht nur Zeit mit unseren Samtpfoten verbringen, sondern auch eine Adoption in Betracht ziehen.
        Entdecken Sie die Liebe und Freude, die eine adoptierte Katze in Ihr Leben bringen kann ‚Äì bereichern Sie Ihr
        Zuhause mit einem neuen, pelzigen Familienmitglied!</p>
    </div>
  </div>

  <div class="grid">
    <div class="item-head">
      <p>In 3 Steps zum neuen Familienmitglied ü§ç</p>
    </div>
    <div class="item-1">
      <img class="item1" src="bilder/1.svg" alt="Step 1" />
      <p class="item1">
        W√§hle deine Traumkatze.
      </p>
    </div>
    <div class="item-2">
      <img src="bilder/2.svg" alt="Step 2" />
      <p>Verliebe dich.</p>
    </div>
    <div class="item-3">
      <img src="bilder/3.svg" alt="Step 3" />
      <p>
        Adoptiere dein Gl√ºck.
      </p>
    </div>
  </div>

  <!--Kontaktformular-->
  <div id="kontaktForm" class="kontaktMaske">
    <h2 id="kontakt√úberschrift">Kontaktformular</h2>
    <p style="text-align:center;">F√ºlle das Kontaktformular aus, um den ersten Schritt f√ºr die Adoption deines
      zuk√ºnftigen Katzen-Familienmitglied zu machen. Gemeinsam schenken wir einer Samtpfote ein liebevolles Zuhause!</p>
    <table id="tabelle">
      <tr>
        <td>
          <label>Name</label>
        </td>
        <td>
          <input class="rund" type="text" placeholder="Gib Deinen Namen ein" />
        </td>
      </tr>
      <tr>
        <td>
          <label>E-Mail</label>
        </td>
        <td>
          <input class="rund" type="email" placeholder="Gib Deine Email an" />
        </td>
      </tr>
      <tr>
        <td>
          <label>Warum m√∂chtest du </br>
            unsere Katze adoptieren?</label>
        </td>
        <td>
          <textarea class="rund" rows="5" cols="33" placeholder="max. 300 Zeichen"></textarea>
        </td>
        <td>
          <a href="error-page.html">
            <button class="button">Abschicken</button>
          </a>
        </td>
        <td>
          <img src="bilder/family.png" alt="" id="family" />
        </td>
      </tr>
    </table>
  </div>

  <div class="leererBlock"></div>

  <!--Verhaltensregeln-->
  <div id="verhaltensregeln">
    <h2 id="regeln√úberschrift">F√ºr ein harmonisches Miteinander zwischen Mensch und Katzen</h2>
    <table>
      <tr>
        <td>
          Katzen bitte nicht f√ºttern.
          <div class="description">
            Unsere Katzen bekommen hochwertiges Katzenfutter. Bei falscher Ern√§hrung kann es zu gesundheitlichen
            Problemen kommen.
          </div>
        </td>
      </tr>
      <tr>
        <td>
          Gerne kannst du ohne Blitz fotografieren.
          <div class="description">
            Fotografiere unsere Katzen gerne nach Lust und Laune. Bitte verzichte dabei auf den Kamerablitz.
          </div>
        </td>
      </tr>
      <tr>
        <td>
          Sei bitte geduldig mit den Katzen.
          <div class="description">
            Die Katzen m√ºssen dich erstmal kennenlernen. Je entspannter du an die Sache herangehst, desto zutraulicher
            sind auch die Samtpfoten.
          </div>
        </td>
      </tr>
      <tr>
        <td>
          Genie√üe und erhalte die entspannte Atmosph√§re.
          <div class="description">
            Verhalte dich ruhig in der Gegenwart der Katzen und versuche nicht hektisch zu werden. Wird es zu laut,
            ziehen sich die Katzen oft zur√ºck.
          </div>
        </td>
      </tr>
    </table>
  </div>

  <div id="pusheen">
    <img src="bilder/pusheen_coffee.png" alt="pusheen_coffee" width="150" />
  </div>

  <div class="leererBlock"></div>
</body>

<!--Footer-->
<footer>
  <div class="footer-content1" id="footercontent">
    <span class="bold"> Impressum</span><br>
    Katzenstra√üe 33<br>
    89077 Ulm<br>
    Tel: 015218676<br>
    E-Mail: info@cats-n-coffee.de<br>
  </div>
  <div class="footer-content2" id="footercontent">
    <span class="bold"> √ñffnungszeiten</span><br>
    Montag bis Freitag: 8:00 - 18:00 Uhr<br>
    Samstag, Sonn- und Feiertag: 8:00 - 14:00<br>
  </div>
  <div class="footer-content3" id="footercontent">
    <span class="bold">Socials</span><br>

    <img src="bilder/icons8-instagram.svg" alt="" id="insta" />
    <img src="bilder/icons8-tick-tack.svg" alt="" id="tiktok" /><br>
  </div>
</footer>


<script type="text/javascript">


  function Katze(id, cover, name, geschlecht, alter, rasse, pers√∂nlichkeit) {
    console.log(`Katze =${cover} mit =${id} mit name =${name}, und geschlecht =${geschlecht}, und alter =${alter},   
      und rasse =${rasse}, und pers√∂nlichkeit =${pers√∂nlichkeit}`);
    this.id = id;
    this.cover = cover;
    this.name = name;
    this.geschlecht = geschlecht;
    this.alter = alter;
    this.rasse = rasse;
    this.pers√∂nlichkeit = pers√∂nlichkeit;
  }

  var datenArray = new Array();


    //Neu: Wird aus der Datenbank gelesen, nicht mehr dem Array
    function lesenKatzeDB() {
    console.log("lesenKatzeDB");
    //Initialisiere Daten-Maske
    $("#datenMaskeZeilen").empty();
    //Lesen der Daten aus der Katzen Datenbanken
    $.get("/katzen", function(data){
      datenArray = data;
    
    // Schleife √ºber das DatenArray
    var katze = "";
    for (var i = 0; i < datenArray.length; i++) {
      //Button Bearbeiten und L√∂schen
      katze = `<div class="wrap">
                        ${erzeugenKatzeSpalten(datenArray[i])}
                      
                         <button class="admin worker button" onclick="wechselnMaske('eingabeMaske',${i})" 
                         adminVisible="true" workerVisible="true">
                          <img src="bilder/pencil-square.svg"/>
                          </button>
                        <button class="admin button" onclick="loeschenKatzeDB(${i})" adminVisible="true">
                          <img src="bilder/trash.svg"/>
                        </button>
                   </div> `;
      $("#datenMaskeZeilen").append(katze);
       }
     })
    }

  function erzeugenKatzeSpalten(objekt) {
    console.log("erzeugenKatzeSpalten");
    var katzeSpalten = "";

    
    katzeSpalten = `<div class="katzi">
                        <div class="katzi-bild">
                          <img src="${objekt.cover}" alt="Katze" height="200px"/>
                        </div>
                        <div class="katzi-name">
                          <p>Name: ${objekt.name}</p>
                          <p>Geschlecht: ${objekt.geschlecht}</p> 
                          <p>Alter: ${objekt.alter}</p> 
                          <p>Rasse: ${objekt.rasse}</p>
                          <p>Pers√∂nlichkeit: ${objekt.pers√∂nlichkeit}</p>
                      </div>
                      </div>
                       `
    return katzeSpalten;
  }

  function anlegenKatzeDB() {
    console.log("anlegenKatzeDB");
    //Auslesen der Daten
    var cover = $("#cover").val();
    var name = $("#nameEingabe").val();
    var geschlecht = $("#eingabeGeschlecht input:checked").val();
    var alter = $("#alter").val();
    var rasse = $("#rasseEingabe").val();
    var pers√∂nlichkeit = $("#pers√∂nlichkeit").val();

    var neueKatze = new Katze("",cover, name, geschlecht, alter, rasse, pers√∂nlichkeit);

    //Einf√ºgen der Katze in das Array
    //datenArray.push(neueKatze);
    $.post("/katzen", neueKatze, function(data){
      lesenKatzeDB();
      wechselnMaske("datenMaske");
    });

    //Initialisieren der Eingabemaske
    $("#cover").val("");
    $("#nameEingabe").val("");
    $("#eingabeGeschlecht").val("");
    $("#alter").val("");
    $("#eingabeRasse").val("");
    $("input[name='pers√∂nlichkeit']").prop("checked", false);

  }
  
  //Neu: √Ñndern in der Datenbank
  function aendernKatzeDB(index) {
    console.log("aendernKatzeDB mit" + index);
    
    var cover = $("#cover").val();
    var name = $("#nameEingabe").val();
    var geschlecht = $("#eingabeGeschlecht input:checked").val();
    var alter = $("#alter").val();
    var rasse = $("#rasseEingabe").val();

    //Leeres Array soll pers√∂nlichkeit speichern
    var gew√§hltePers√∂nlichkeit = [];
    //JQuery, um Checkboxen mit name=pers√∂nlichkeit zu finden und selektiert die verschiedenen Checkboxen
    $("input[name='pers√∂nlichkeit']:checked").each(function () { //each(function) ist eine anonyme funktion, damit jede checkbox ausgew√§hlt     werden kann
      //In der schleife wird die pers√∂nlichkeit dem Array hinzugef√ºgt
      gew√§hltePers√∂nlichkeit.push($(this).val());
    });

    var geanderteKatze = new Katze("",cover, name, geschlecht, alter, rasse, gew√§hltePers√∂nlichkeit);

    //datenArray[index] = geanderteKatze;
    $.put('/katzen/' + datenArray[index].id, geanderteKatze, function(data){
      lesenKatzeDB();
      wechselnMaske("datenMaske");
      aktualisierenDOM();
    });

    $("#cover").val("");
    $("#nameEingabe").val("");
    $("#eingabeGeschlecht input").prop('checked', false);
    $("#alter").val("");
    $("#rasseEingabe").val("");
    $("input[name='pers√∂nlichkeit']").prop('checked', false);
  }

  function loeschenKatzeDB(index) {
    console.log("loeschenKatzeDB mit" + index);
    //Sicherheitsabfrage
    $("#dialog").html(`M√∂chtest du wirklich die Katze l√∂schen?`);

    $(function() {
      $("#dialog").dialog({
        resizable: false,
        title: "L√∂schen",
        height: "auto",
        width: 400,
        modal: true,
        buttons: {
          "Ja": function() {
            $.delete("/katzen/" + datenArray[index].id, function(data){
              aktualisierenDOM();
              lesenKatzeDB();
            })
            .fail(function(data){
              errorAlert("L√∂schen fehlgeschlagen", data.responseText);
            });
          
            $(this).dialog("close");
        },
        Cancel: function(){
           $(this).dialog("close");
          }
        }
      });
    });
      
  }

  function wechselnMaske(sichtbareMaske,fall) {
    console.log(`wechselnMaske auf ${sichtbareMaske}, fall=${fall}`);

    $(".maske").hide();
    $("#" + sichtbareMaske).show();
    
    //Anlegen und √Ñndern unterscheiden
   if (typeof fall !== "undefined") {
      if(fall =="anlegen"){
        console.log("\t anlegen");
        $("#eingabeMaske form").attr("action", "javascript:anlegenKatzeDB()");
      }else {
      $("#cover").val(datenArray[fall].cover);
      $("#name").val(datenArray[fall].name);
      $("#geschlecht").val(datenArray[fall].geschlecht);
      $("#alter").val(datenArray[fall].alter);
      $("#rasse").val(datenArray[fall].rasse);
      $("#pers√∂nlichkeit").val(datenArray[fall].pers√∂nlichkeit);

      $("#eingabeMaske form").attr("action", "javascript:aendernKatzeDB(" + fall + ")");
    }
  }}

  //Fehler-Ausgabe
  function errorAlert(type, data){
    console.log('Fehlermeldung vom Server nach ${type}-Request: ${JSON.stringify(data).toString()}');
    alert('Fehlermeldung vom Server nach ${type}-Request: ${JSON.stringify(data).toString()}');
  }

  function einloggen() {
    console.log("Neu WebApp: einloggen");
    //User loggt sich ein
    var loggenDaten= {"user": $("#benutzername").val(),
                     "password": $("#password").val()};
    $.post("/login", loggenDaten, function(data){
      //Asynchrone Funktion
      console.log("WebApp: einloggen " + data);
      if(data===true){
        //Einloggen funktioniert
        aktualisierenDOM();
        wechselnMaske("datenMaske");
      }else{
        //Einloggen hat nicht funktioniert
        alert("Falscher Benutzername oder Passwort!");
      }
    })
    .fail(function(data){
      errorAlert("POST (einloggen)", data.responseText);
    });
  }

  

  function ausloggen() {
    console.log("Neu WebApp: ausloggen");
    //Ausloggen
    $.get("/logout", function(data){
      console.log("WebApp: ausloggen" + data);
      if(data===true){
        //Ausloggen funktioniert      
        aktualisierenDOM();
        wechselnMaske("datenMaske");
    }else{
        //Ausloggen funktioniert nicht
        alert("Fehler beim Ausloggen!");
    }
    });
  }

  //Version 1 Validierung von LoginMaske
  function loginRules() {
    console.log("Login-Validierungsregeln gesetzt");
    
    $("#benutzername").rules("add", {
      required: true,
      messages: {
        required: "Gib bitte dein Benutzername ein!",

      }
    })
    $("#password").rules("add", {
      required: true,
      minlength: 3,
      messages: {
        required: "Gib bitte dein Passwort ein!",
        minlength: jQuery.validator.format("Dein Passwort muss mindestens {0} Zeichen lang sein!")
      }
    })
  }


  //Version 2 Validierung von EingabeMaske (Name und Katzenrasse)
  $("#eingabeForm").validate({
    errorElement: 'span',
    rules:{
      "nameEingabe":{
        required:true,
        minlength:2
      },
      "rasseEingabe":{
        required:true,
        minlength:5
      }
    },

    messages:{
      "nameEingabe":{
        required: "Gib bitte einen Namen ein!",
        minlength: "Der Name muss mindestens 2 Zeichen lang sein!"
      },
      "rasseEingabe":{
        required: "Gib bitte eine Katzenrasse ein!",
        minlength: "Die Rasse muss mindestens 5 Zeichen lang sein!"
      }
    }
  });

  function aktualisierenDOM() {
    console.log("Neu WebApp: aktualisierenDOM");
    //Login-Status ermitteln
    var eingeloggt = false;
    $.get("/service_istEingelogged", function(data){
      console.log("WebApp: aktualisisrenDOM: "+ data);
      eingeloggt=data;
      //Aktualisieren des Logknopfs nach Login-Status
      setzenLogKnopf(eingeloggt);
      //Aktualisieren der Berechtigung nach Login-Status und Rolle
      setzenBerechtigungen(eingeloggt);
    });
  }

  function setzenLogKnopf(eingeloggt) {
    console.log("Neu: setzenLogKnopf mit" + eingeloggt);

    if (eingeloggt) {
      console.log("\t eingeloggt");
      //Logknopf wird ge√§ndert zu Ausloggen
      $("#logKnopf").html("Logout")
        .attr("onclick", "ausloggen()");

    } else {
      console.log("\t nicht eingeloggt");
      //Logknopf wird ge√§ndert zu Loggen
      $("#logKnopf").html("Login")
        .attr("onclick", "wechselnMaske('loginMaske')");
    }
  }

  function setzenBerechtigungen(eingeloggt) {
    console.log("NEU: setzenBerechtigungen mit " + eingeloggt);

    if (eingeloggt) {
      console.log("\t eingeloggt");
      //Welche Rolle hat der user?
      $.get("/service_rollenAbfrage", function(rollen){
        var rollenArray=rollen.toString().split(",");
        
        for(var i =0; i<rollenArray.length; i++){
        $("." + rollenArray[i]).attr(rollenArray[i] + "Visible", true);
      }
        
    })} else {
      //User ist nicht als worker oder admin eingeloggt
      $(".worker").attr("workerVisible", false);
      $(".admin").attr("adminVisible", false);
    }
  }

  //autocomplete-Funktion statt Selectmenu, da zu viele Optionen
    //Array mit Vorschl√§gen
    var breeds = ["Siamkatze", "Britisch Kurzhaar", "Ragdoll", "Perserkatze", "Bengalkatze", "Maine Coon", "Britisch Langhaar", 
                  "Exotic Kurzhaar", "Scottish Fold", "Russisch Blau", "Thaikatze", "Balinese"];

    $("#rasseEingabe").autocomplete({
      source: breeds
    });

  //Ceckbox-Radio 
  $(function(){
    $("input[type=radio]").checkboxradio();
    
  });

  //progressbar
  $( function() {
    $("#progressbar").progressbar({
      value: 0
    });

    $("#eingabeInput").on("input", function(){
      updateProgress();
    });
    $(":radio").on("click", function(){
      updateProgress();
    });
        
    $(":checkbox").on("click", function(){
      updateProgress();
    });

    function updateProgress() {
      //Logik f√ºr die Progressbar
      //Tutorium
      var max = 4;
      var min = 0;

      $(".eingabeInput").each(function(){if($(this).val()!==""){
        min++;}
          });;
      $("progressbar").progressbar({value: progressValue});
      
      var progressValue = calculateProgressValue();
      }

      function calculateProgressValue(){
        var filledInputs = $("input[type='text']").filter(function(){
          return $(this).val().trim() !=="";
        }).length;

        filledInputs += $("input[type=text):checked, input[type=radio]:checked, input[type=checkbox]:checked").length;
        
        var totalInputs = $("input[type='text']").length + $("input[type='radio']").length +$("input[type='checkbox']").length;
        var progressValue = (min/max)*100;
        return progressValue;
      }
  } );
  
  
    wechselnMaske("datenMaske");
    lesenKatzeDB();

  
    //Initialisieren des Geschlechts bei √Ñnderung
    $("#eingabeGeschlecht input").prop("checked", false);
    //Initialsieren des DOM mit dem Login-Status
    aktualisierenDOM();
    $("#loginForm").validate({
      errorElement: 'span',
    }); 
   loginRules();
  
    
  </script>

</html>